{"version":3,"file":"holochain-app.js","sourceRoot":"","sources":["../src/holochain-app.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, css, html } from 'lit';\nimport { customElement, property, state } from 'lit/decorators.js';\nimport {\n  AppWebsocket,\n  ActionHash,\n  InstalledAppInfo,\n} from '@holochain/client';\nimport { contextProvider } from '@lit-labs/context';\nimport '@material/mwc-circular-progress';\n\nimport { appWebsocketContext, appInfoContext } from './contexts';\n\nimport './distreview/reviews/create-review';\nimport './distreview/reviews/create-paper';\nimport './distreview/reviews/all-papers';\nimport './distreview/reviews/paper-page';\n// import \"@fontsource/space-mono\";\n\n\nenum PageView {\n  AllPapers,\n  Paper,\n  CreateReview,\n  CreatePaper,\n}\n\n@customElement('holochain-app')\nexport class HolochainApp extends LitElement {\n  @state() loading = true;\n\n  @contextProvider({ context: appWebsocketContext })\n  @property({ type: Object })\n  appWebsocket!: AppWebsocket;\n\n  @contextProvider({ context: appInfoContext })\n  @property({ type: Object })\n  appInfo!: InstalledAppInfo;\n\n  @state()\n  pageView: PageView = PageView.AllPapers;\n\n  @state()\n  _selectedPaperHash: ActionHash | undefined;\n\n  @state()\n  _selectedDoi: string | undefined;\n\n\n\n\n  async firstUpdated() {\n    this.appWebsocket = await AppWebsocket.connect(\n      `ws://localhost:${process.env.HC_PORT}`\n    );\n\n    this.appInfo = await this.appWebsocket.appInfo({\n      installed_app_id: 'distreviewed',\n    });\n\n    this.loading = false;\n  }\n\n  selectPaper(e: CustomEvent) {\n    this._selectedPaperHash = e.detail;\n    this.pageView = PageView.Paper;\n  }\n\n  createReview(e: CustomEvent) {\n    this._selectedPaperHash = e.detail.actionHash;\n    this._selectedDoi = e.detail.paper.doi;\n    this.pageView = PageView.CreateReview;\n  }\n\n  renderContent() {\n    if (this.pageView == PageView.AllPapers) {\n      return html`\n      <div style=\"display: flex; flex-direction: column; width: 50%;\">\n        <all-papers @create-paper=${()  => this.pageView = PageView.CreatePaper} @paper-selected=${(e: CustomEvent) => this.selectPaper(e)}></all-papers>\n      </div>\n      `\n    } else if (this.pageView == PageView.Paper) {\n      return html`<paper-page .actionHash=${this._selectedPaperHash} @create-review=${(e: CustomEvent) => this.createReview(e)}></paper-page>`\n    } else if (this.pageView == PageView.CreatePaper) {\n      return html`<create-paper @paper-created=${() => this.pageView = PageView.AllPapers }></create-paper>`\n    } else if (this.pageView == PageView.CreateReview) {\n      return html`<create-review .paperHash=${this._selectedPaperHash}, .doi=${this._selectedDoi} @review-created=${() => this.pageView = PageView.Paper}></create-review>`\n    }\n  }\n\n\n  render() {\n    if (this.loading) {\n\n      return html`\n        <mwc-circular-progress indeterminate></mwc-circular-progress>\n      `;\n\n    } else {\n      return html`\n        <main style=\"width: 100%;\">\n\n        <div class=\"title-bar\">\n          <h1>Distreviewed</h1>\n        </div>\n          ${ this.renderContent() }\n        </main>\n      `;\n    }\n\n  }\n\n  static styles = css`\n    :host {\n      min-height: 100vh;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: flex-start;\n      color: #183E29;\n      margin: 0 auto;\n      text-align: center;\n      background-color: var(--lit-element-background-color);\n      background: #FCF1E9;\n    }\n\n    main {\n      flex-grow: 1;\n    }\n\n    .title-bar {\n      border: 2px solid #183E29;\n      box-shadow: 9px 12px #183E29;\n      background: #FCF1E9;\n      font-family: 'Space Mono';\n      margin: 10px 40px;\n    }\n\n    .app-footer {\n      align-items: center;\n    }\n\n    .app-footer a {\n      margin-left: 5px;\n    }\n  `;\n}\n"]}